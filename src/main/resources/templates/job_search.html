<!DOCTYPE html>
<html 	xmlns="http://www.w3.org/1999/xhtml"
         xmlns:th="http://www.thymeleaf.org"
         xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <th:block th:replace="base :: head"></th:block>
</head>
<body>
<div class="container">
    <th:block th:replace="base :: nav"></th:block>

    <div class="jumbotron">
        <h1>Hello <th:block th:text="${person.firstName}"></th:block>!</h1>
        <h2>Are you ready to hunt for jobs?.</h2>
        <p>How would you like to search?</p>
        <div class="btn-group">
            <button id="title_search" class="btn btn-warning">Search Job Titles</button>
            <button id="skill_search" class="btn btn-warning">Search Jobs by skill requirements</button>
        </div>
    </div>

    <!-- results -->
    <div class="well" th:each="job : ${jobs}">
        <div class="well">
            <h1 th:text="${job.title}">title</h1>
            <p>Employer: <th:block th:text="${job.employer}">employer</th:block></p>
            <p>Salary: <th:block th:text="${job.salary}">employer</th:block></p>
            <p>Job description: <th:block th:text="${job.description}">description</th:block></p>
            <p>required skills: <th:block th:text="${job.requirements}">skills</th:block></p>
        </div>
    </div>
    <!-- results -->

    <!-- search title -->
    <div class="well center" style="height:120px; display: none;" id="search_title">
        <button class="btn btn-danger btn-xs btn-closer" id="close_title">X</button>
        <form class="form-horizontal" th:action="@{/title_job_search}" th:object="${job}" method="post">
            <div class="form-group">
                <input th:field="*{title}" type="text" class="form-control" placeholder="Job Title"/>
            </div>
            <div class="form-group">
                <button type="submit" class="form-control">Search for Jobs</button>
            </div>
        </form>
    </div>
    <!-- search title -->

    <!-- search skill -->
    <div class="well center" style="height:120px; display: none;" id="search_skill">
        <button class="btn btn-danger btn-xs btn-closer" id="close_skill">X</button>
        <form class="form-horizontal" th:action="@{/skill_job_search}" th:object="${job}" method="post">
            <div class="form-group">
                <input th:field="*{requirements}" type="text" class="form-control" placeholder="Skill requirements"/>
            </div>
            <div class="form-group">
                <button type="submit" class="form-control">Search for Jobs</button>
            </div>
        </form>
    </div>
    <!-- search skill -->



</div><!-- /.container -->\
<script>
    const fields = {t: 'title', s: 'skill' };

    //activate buttons
    for (let i in fields) {
        ID(`${fields[i]}_search`).addEventListener('click', () => {
            ID(`search_${fields[i]}`).style.display = 'block';
        });
        ID(`close_${fields[i]}`).addEventListener('click', () => {
            ID(`search_${fields[i]}`).style.display = 'none';
        });
    }

    //edit nav bar
    ID('job_search').className += 'active';
    ID('login').style.display = 'none';
    ID('post_job').style.display = 'none';
    ID('register').style.display = 'none';
</script>
</body>
</html>